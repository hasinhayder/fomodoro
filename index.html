<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pomodoro - Beautiful Timer</title>
  <link rel="icon" id="dynamic-favicon" href="" type="image/svg+xml" sizes="any">
  <link rel="stylesheet" href="styles.css" />
  <style>
    [x-cloak] {
      display: none !important;
    }
  </style>
  <meta name="description" content="A beautiful Pomodoro timer with themes and settings" />
  <script defer src="//cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="theme-morning" x-data="pomodoroApp()" x-init="init()" @keydown.window="handleGlobalKeydown($event)">
  <div class="app" x-cloak>
    <header class="header">
      <h1 class="logo">Pomodoro</h1>
      <div class="header-controls">
        <a href="https://github.com/hasinhayder/fomodoro" target="_blank" class="icon-btn" title="View on GitHub">üêô</a>
        <button @click="toggleSettings()" class="icon-btn" :aria-expanded="settingsOpen" aria-controls="settings" title="Settings (Cmd+K/Ctrl+K)">‚öôÔ∏è</button>
      </div>
    </header>

    <main class="main">
      <section class="timer-area" aria-live="polite">
        <div class="timer-top">
          <div class="session-indicator" x-text="sessionIndicator"></div>
          <div class="progress-container">
            <div class="progress-bar" :style="`width: ${progressPercent}%`"></div>
          </div>
          <div class="session-dots" aria-hidden="true">
            <template x-for="(dot, index) in sessionDots" :key="index">
              <div class="dot" :class="{ active: dot.active }"></div>
            </template>
          </div>
        </div>

        <div class="timer-display">
          <span id="minutes" x-text="minutes"></span>
          <span class="colon">:</span>
          <span id="seconds" x-text="seconds"></span>
        </div>

        <div class="timer-controls">
          <button @click="toggleStartPause()" class="start-btn">
            <svg class="btn-icon" x-show="!state.running" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M8 5v14l11-7z"/>
            </svg>
            <svg class="btn-icon" x-show="state.running" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
            <span class="btn-text" x-text="startBtnText"></span>
          </button>
          <button @click="skipTimer()" class="ghost-btn icon-btn-large">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
            </svg>
          </button>
          <button @click="resetTimer()" class="ghost-btn icon-btn-large">
            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
              <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
            </svg>
          </button>
        </div>
      </section>

      <!-- Right side quotes for motivation and time management tips -->
      <aside class="quote-area" aria-live="polite" aria-atomic="true" :class="{ hidden: settingsOpen }">
        <div class="quote-card" :class="quoteFadeClass">
          <blockquote x-text="currentQuote.text"></blockquote>
          <cite x-text="currentQuote.author"></cite>
        </div>
      </aside>

    </main>

    <div class="settings-bg" @click="closeSettings()" :class="{ open: settingsOpen }"></div>
    <aside class="settings-area" id="settings" :aria-hidden="!settingsOpen" role="dialog" aria-modal="true" :class="{ open: settingsOpen }">
      <div class="settings-inner" @keydown.enter.prevent="saveSettings()">
        <div class="settings-head">
          <h2>Settings</h2>
          <button @click="closeSettings()" class="icon-btn" aria-label="Close settings">‚úñÔ∏è</button>
        </div>

        <div class="setting-row">
          <label>Work Title</label>
          <div class="setting-input"><input x-model="settings.workTitle" type="text" placeholder="Enter work title" /></div>
        </div>

        <div class="setting-row slider-row">
          <label>Work</label>
          <div class="setting-input slider-container">
            <input x-model="settings.work" @input="updateCurrentModeDuration()" type="range" min="1" max="60" />
            <span class="slider-value" x-text="settings.work"></span>
          </div>
        </div>

        <div class="setting-row slider-row">
          <label>Short Break</label>
          <div class="setting-input slider-container">
            <input x-model="settings.short" @input="updateCurrentModeDuration()" type="range" min="1" max="15" />
            <span class="slider-value" x-text="settings.short"></span>
          </div>
        </div>

        <div class="setting-row slider-row">
          <label>Long Break</label>
          <div class="setting-input slider-container">
            <input x-model="settings.long" @input="updateCurrentModeDuration()" type="range" min="1" max="45" />
            <span class="slider-value" x-text="settings.long"></span>
          </div>
        </div>

        <div class="setting-row">
          <label>Sessions until long break</label>
          <div class="setting-input"><input x-model="settings.sessionsUntilLong" type="number" min="1" max="10" /></div>
        </div>

        <div class="setting-row">
          <label>Theme</label>
          <div class="setting-input">
            <select x-model="settings.theme" @change="applyTheme(); saveSettingsToStorage(settings)">
              <option value="morning">Morning</option>
              <option value="night">Night</option>
              <option value="mint">Mint</option>
              <option value="lavender">Lavender</option>
              <option value="sunrise">Sunrise</option>
              <option value="ocean">Ocean</option>
              <option value="forest">Forest</option>
              <option value="rose">Rose</option>
              <option value="sunset">Sunset</option>
              <option value="desert">Desert</option>
              <option value="sky">Sky</option>
              <option value="meadow">Meadow</option>
              <option value="autumn">Autumn</option>
              <option value="coral">Coral</option>
              <option value="indigo">Indigo</option>
              <option value="sand">Sand</option>
              <option value="emerald">Emerald</option>
              <option value="plum">Plum</option>
              <option value="berry">Berry</option>
              <option value="gold">Gold</option>
            </select>
          </div>
        </div>

        <div class="setting-row">
          <label>Auto start next</label>
          <div class="setting-input"><input x-model="settings.autoStart" type="checkbox" /></div>
        </div>

        <div class="setting-row">
          <button type="button" @click="saveSettings()" class="start-btn small">Save</button>
          <button type="button" @click="resetSettings()" class="ghost-btn small">Reset</button>
        </div>

        <footer class="settings-footer">
          <small>Saved to device ‚Ä¢ Themes ‚Ä¢ Notifications</small>
          <br>
          <small><a href="https://github.com/hasinhayder/fomodoro" target="_blank" rel="noopener noreferrer" style="text-decoration: none; color: inherit;">Source Code</a></small>
        </footer>
      </div>
    </aside>
    </main>

  </div>

  <script src="script.js"></script>
</body>

</html>